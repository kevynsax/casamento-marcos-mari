<div class="admin-container">
    <div class="admin-header">
        <h1>Painel de Administração</h1>
        <p class="subtitle">Gerenciamento de presentes</p>
    </div>

      @if (loadingCompras()) {
          <div class="loading">
              <p>Carregando compras...</p>
          </div>
      } @else {
          <div class="section-header">
              <h2>Lista de Presentes</h2>
          </div>
          <div class="stats-summary">
              <div class="stat-card">
                  <div class="stat-number">{{ getPurchaseStats().total }}</div>
                  <div class="stat-label">Total de Compras</div>
              </div>
              <div class="stat-card confirmed">
                  <div class="stat-number">{{ formatCurrency(getPurchaseStats().totalValue) }}</div>
                  <div class="stat-label">Valor Total</div>
              </div>
              <div class="stat-card confirmed">
                  <div class="stat-number">{{ getPurchaseStats().finalized }}</div>
                  <div class="stat-label">Finalizadas</div>
              </div>
              <div class="stat-card pending">
                  <div class="stat-number">{{ getPurchaseStats().pending }}</div>
                  <div class="stat-label">Pendentes</div>
              </div>
          </div>

          <div class="purchases-grid">
              @for (compra of compras(); track compra.id) {
                  <div class="purchase-card" [class.finalized]="compra.statusPagamento === 'FINALIZADO'">
                      <div class="purchase-header">
                          <h3>{{ compra.nome }}</h3>
                          <span class="status-badge" [class.finalized]="compra.statusPagamento === 'FINALIZADO'">
                              {{ compra.statusPagamento === 'FINALIZADO' ? 'Finalizado' : 'Pendente' }}
                          </span>
                      </div>
                      <div class="purchase-body">
                          <div class="purchase-info">
                              <span class="label">Valor:</span>
                              <span class="value">{{ formatCurrency(compra.total) }}</span>
                          </div>
                          <div class="purchase-info">
                              <span class="label">Pagamento:</span>
                              <span class="value payment-type">{{ compra.tipoPagamento }}</span>
                          </div>
                          <div class="purchase-info">
                              <span class="label">Produto:</span>
                              <span class="value payment-type">{{ compra.produto.nome }}</span>
                          </div>
                          <div class="purchase-info">
                              <span class="label">Data da Compra:</span>
                              <span class="value">{{ formatDate(compra.dataCompra) }}</span>
                          </div>
                          @if (compra.dataPagamento) {
                              <div class="purchase-info">
                                  <span class="label">Data do Pagamento:</span>
                                  <span class="value">{{ formatDate(compra.dataPagamento) }}</span>
                              </div>
                          }
                          @if (compra.mensagem) {
                              <div class="purchase-message">
                                  <span class="label">Mensagem:</span>
                                  <p>"{{ compra.mensagem }}"</p>
                              </div>
                          }
                      </div>
                  </div>
              }
          </div>
      }
</div>
